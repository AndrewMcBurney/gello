{% extends "base.html" %}
{% import "bootstrap/wtf.html" as wtf %}
{% import "_macros.html" as macros %}

{% block title %}Repositories{% endblock %}

{% block page_content %}
  <div class="page-header">
    <h1>{{ organization_name }}'s Public Repositories</h1>
  </div>

  <table class="table table-hover repos">
    <thead>
      <tr>
        <th>GitHub ID</th>
        <th>Name</th>
        <th>URL</th>
        <th>Issues</th>
        <th>Pull Requests</th>
      </tr>
    </thead>

    {% for repo in repos %}
      <tr>
        <td>{{ repo.github_repo_id }}</td>
        <td>{{ repo.name }}</td>
        <td>
          <a href="{{ repo.url }}">
            {{ repo.url }}
          </a>
        </td>
        <td>
          <a href="{{ url_for('issue.index', id=repo.id) }}">
            <b>({{ repo.issues.count() }})</b> issues for {{ repo.name }}
          </a>
        </td>
        <td>
          <a href="{{ url_for('pull_request.index', id=repo.id) }}">
            <b>({{ repo.pull_requests.count() }})</b> pull requests for {{ repo.name }}
          </a>
        </td>
      </tr>
    {% endfor %}
  </table>

  <div>
    {{ wtf.quick_form(form) }}
  </div>

  {% if pagination %}
    <div class="pagination">
      {{ macros.pagination_widget(pagination, '.index') }}
    </div>
  {% endif %}
{% endblock %}

{% block scripts %}
  {{ super() }}
  {{ pagedown.include_pagedown() }}
{% endblock %}
